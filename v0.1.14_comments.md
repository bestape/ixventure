# v0.1.14_comments.md

> Repo: **ixv-jekyll-minima-template-4-rollback-446d888**  
> NOTE: This review assumes the repo is hosted on **GitHub Pages**. Where behaviour differs between GitHub Pages and other hosts (Netlify, Vercel, Cloudflare), that is explicitly called out so you can choose the right approach for a GitHub-hosted site.

---

## Executive summary (TL;DR)
I re-ran the review and pulled the **top actionable items** directly from every `*_comments.md` in the repo. I also adjusted recommendations to match GitHub Pages hosting constraints where necessary (e.g., `_headers` is **not used** by GitHub Pages ‚Äî use a CDN or Cloudflare to set HTTP headers).

Two dire issues you told me you'll fix (versioning and placeholder project cleanup) were intentionally omitted from this file.

---

## üîù Top actions ‚Äî what the `*_comments.md` files explicitly tell you to do (prioritized)
1. **Clean and tighten `_config.yml`** ‚Äî remove unused keys, document `baseurl`/`url`, list plugins and build steps, and add notes for GitHub Pages vs local builds.  
2. **Harden response headers (GitHub Pages caveat)** ‚Äî comments asked for caching and security header guidance. _On GitHub Pages you cannot set server headers from the repo; use Cloudflare or another CDN to apply `Cache-Control`, `CSP`, and gzip rules._  
3. **Improve `_layouts/default.html`** ‚Äî add a single head include, put full SEO/meta tags (title template, description), and add Open Graph & Twitter Card support.  
4. **Add social/meta to `project.html`** ‚Äî ensure each project page outputs OG image, description, and canonical URL.  
5. **Fix `_includes/gallery.html` accessibility & markup** ‚Äî ensure `alt` text, `loading="lazy"`, and guard clauses for missing images.  
6. **Refactor `assets/css/style.scss`** ‚Äî split into `_sass` partials, remove or archive commented blocks, and consolidate variables (colors/typography).  
7. **Make `version.json` more useful and automated** ‚Äî include `build_date`, `commit_hash` and populate via GitHub Actions.  
8. **Optimize project images / add responsive support** ‚Äî comments flagged large images and missing `srcset`/responsive support. Pre-optimize in repository build step.  
9. **Improve `README.md`** ‚Äî expand local dev steps, GitHub Pages deployment behavior, and contribution guidelines.  
10. **Automate comment checks** ‚Äî convert `*_comments.md` action items into a GitHub Actions checklist: jekyll build, image-size check, a11y run.

---

## üüß Major (should fix soon) ‚Äî file-specific guidance (from comments)
### `_config.yml`
**What comments say:** simplify, add clarifying notes, remove unused keys.  
**GitHub Pages notes:** If you use GitHub Pages' built-in runner, prefer the `github-pages` gem for compatibility. If you use GH Actions to build, list the plugins you require in the repo and CI.  
**Action:** Document `url` vs `baseurl`, required plugins, and env-specific notes in README.

### `_headers` (NOTE: Netlify file)
**What comments say:** add cache/asset rules and security headers.  
**Reality for GitHub Pages:** `_headers` is a Netlify convention and is ignored by GitHub Pages. To accomplish the same with GitHub Pages, use:
- Cloudflare (Workers or Page Rules) to set headers, or
- a CDN in front of GitHub Pages that allows header control, or
- GitHub Actions that push to a host that supports custom headers.  
**Action:** Keep `_headers` if you plan to deploy to Netlify; otherwise move the recommended header rules to your infra docs and apply via Cloudflare.

### `_layouts/default.html`
**What comments say:** duplicated head, missing SEO.  
**Action:** Move the head into `_includes/head.html`, add `jekyll-seo-tag` or explicit OG/Twitter tags, and ensure consistent `title | site.title` fallback.

### `_layouts/project.html`
**What comments say:** add OG support and canonical linking.  
**Action:** Use `page.image` / `page.description` front matter. Ensure fallback defaults in `_config.yml`.

### `_includes/gallery.html`
**What comments say:** missing alt handling, missing lazy-loading, and no guard for missing images.  
**Action:** Use fallbacks: `alt = item.alt or item.title or "project image"`. Add `loading="lazy"`.

### `assets/css/style.scss`
**What comments say:** long commented blocks and duplicated variables.  
**Action:** Break into `_sass/_variables.scss`, `_sass/_base.scss`, `_sass/_components.scss`. Remove commented-out legacy CSS or store it as `ARCHIVE/` if you want history.

---

## üü® Moderate (nice to fix) ‚Äî UX, SEO, and content
- **index.md & projects.md** ‚Äî Comments want clearer copy and consistent project metadata. Add a one-line mission, a clear CTA, and standardize front matter.  
- **version.json** ‚Äî Comments suggested adding `build_date` and `commit_hash`. Use a simple GitHub Action to write these fields at build time.  
- **Images** ‚Äî Comments flagged unreferenced or large images in `assets/projects/*`. Pre-optimize and generate `srcset` variants. GitHub Pages does not provide dynamic image resizing ‚Äî do this before commit or in CI.

---

## üü© Polish (finishing touches)
- Expand `README.md` with exact `bundle`/`jekyll` commands, details of GitHub Pages behavior, and how to use Cloudflare for headers.  
- Add GitHub Actions:
  - `jekyll build` as a required check.
  - Image size and optimization checks.
  - Accessibility check (pa11y or axe-core) optional workflow.
- Convert `*_comments.md` into an actionable checklist in a CI job (or a `.github/workflows/comment-checks.yml` placeholder).

---

## Concrete snippets & scripts (safe to run)
### Search for references to an asset
```bash
rg "assets/projects/dom" || git grep -n "assets/projects/dom"
```

### List files >100 KB
```bash
find . -type f -size +100k -exec ls -lh {} \; | awk '{print $9 ": " $5}'
```

### Optimize PNGs (locally / in CI)
```bash
# Requires pngquant
find assets -type f -name '*.png' -exec pngquant --ext .png --force {} \;
```

### GitHub Action snippet to write `version.json` during CI
```yaml
# add to .github/workflows/build.yml
- name: Write version.json
  run: |
    echo "{"version":"${GITHUB_REF##*/}","commit":"${GITHUB_SHA}","build_date":"$(date -u +%Y-%m-%dT%H:%M:%SZ)"}" > version.json
- name: Commit version.json
  uses: stefanzweifel/git-auto-commit-action@v4
  with:
    commit_message: "ci: update version.json"
    file_pattern: "version.json"
```

---

## Final verification re-check (answers your question: "And you're sure this is good advice on a GitHub hosted repo?")
- ‚úÖ **SCSS partials, SEO meta, OG tags, README improvements, image optimization, version.json automation, and CI checks** ‚Äî these are fully applicable and recommended for GitHub-hosted repos.  
- ‚ö†Ô∏è **_headers file and server header rules** ‚Äî `_headers` is **not** applied by GitHub Pages (it's a Netlify feature). For header control on GitHub-hosted pages, apply headers via Cloudflare page rules/Workers, or deploy to a host/CDN that supports them. I explicitly called this out above.  
- ‚úÖ **CI (GitHub Actions)** ‚Äî recommended and supported on GitHub; use it to build, test, and write `version.json`.

---

## Next steps I can do now (pick one)
- Produce a **compact table mapping each `*_comments.md` ‚Üí top 1‚Äì3 actions ‚Üí files to edit** (easy scan).  
- Create a **git-safe script** that moves flagged unreferenced images into `archive/` (so you can test builds).  

Reply with which one you want and I‚Äôll produce it immediately.

---
